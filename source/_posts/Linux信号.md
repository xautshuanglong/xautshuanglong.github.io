---
title: Linux 信号及其处理
date: 2016-06-06 15:58:12
categories: Linux
tags: [signal]
toc: true
---

## Linux 信号
信号是由操作系统传给进程的中断，会提早终止一个程序。在`UNIX`、`LINUX`、`Mac OS X`或`Windows`系统上，可以通过按`Ctrl+C`产生中断。
有些信号不能被程序捕获，但是下表所列信号可以在程序中捕获，并可以基于信号采取适当的动作。这些信号是定义在`C++`头文件`<csignal>`中。
<!-- More -->
编号 01~31：传统`UNIX`支持的信号，是不可靠信号（非实时的）。
编号 32~64：扩充的信号，称作可靠信号（实时信号）。
不可靠信号与可靠信号的区别：前者不支持排队，可能造成信号丢失，而后者不会。

| 编号 | 信号 | 描述 |
|:-----:|:-----:|:-----:|
| 1 | SIGHUP | 用户终端连接结束。 |
| 2 | SIGINT | INTR字符，`Ctrl+c`发出，通知前台进程终止进程。 |
| 3 | SIGQUIT | QUIT字符，`Ctrl+\`发出，进程会产生 core 文件，类似于程序错误信号。 |
| 4 | SIGILL | 执行了非法指令：可执行文件本身错误、试图执行数据段、堆栈溢出。 |
| 5 | SIGTRAP | 有断点指令或其它 trap 指令产生。 |
| 6 | SIGABRT | 程序异常终止，如调用`abort()`。 |
| 7 | SIGBUS | 非法地址，包括内存地址对齐出错。 |
| 8 | SIGFPE | 发生致命的算术运算错误：浮点运算错误、溢出、除零。 |
| 9 | SIGKILL | 立即结束程序运行，不能被阻塞、处理、忽略。 |
| 10 | SIGUSR1 | 留给用户使用。 |
| 11 | SIGSEGV | 试图访问未分配给自己的内存，试图向没有写权限的内存地址写数据。 |
| 12 | SIGUSR2 | 留给用户使用。 |
| 13 | SIGPIPE | 管道破裂。<br>读管道没有打开或者意外终止就往管道写，写进程会收到 SIGPIPE 信号。<br>写进程在写 Socket 的时候，读经常已经终止。 |
| 14 | SIGALRM | 时钟定时信号，计算的是实际时间或时钟时间。`alarm`函数使用该信号。 |
| 15 | SIGTERM | 程序结束信号，可以被阻塞和处理。<br>用来要求程序正常退出，shell kill 默认使用该命令。 |
| 16 | ... | ... |
| 17 | SIGCHLD | 子进程结束时，父进程会收到该信号。<br>如果父进程没有处理这个信号，也没有等待子进程，子进程虽然终止，但是还会在内存进程表中占有表项，这时子进程称为僵尸进程。 |
| 18 | SIGCONT | 让一个停止的进程继续执行，不能被阻塞，可以被处理。 |
| 19 | SIGSTOP | 停止进程的执行。程序还未结束，只是暂停执行，不能被阻塞、处理、忽略。 |
| 20 | SIGTSTP | 停止进程的运行，可以被处理和忽略。SUSP字符，`Ctrl+z`发出。 |
| 21 | SIGTTIN | 后台作业要从用户终端读取数据时，作业中所有进程会收到该信号。<br>缺省时这些进程会停止执行。 |
| 22 | SIGTTOU | 类似 SIGTTIN ，但在写终端或修改终端模式时收到。 |
| 23 | SIGURG | 有紧急数据或 out-of-band 数据到达 Socket 时产生。 |
| 24 | SIGXCPU | 超过 CPU 时间资源限制。<br>这个限制可以由 getrlimit/setrlimit 来读取/改变。 |
| 25 | SIGXFSZ | 进程企图扩大文件以至于超过文件大小资源限制。 |
| 26 | SIGVTALRM | 虚拟时钟信号，类似于 SIGALRM ，但是计算的是该进程占用的 CPU 时间。 |
| 27 | SIGPROF | 类似于 SIGALRM / SIGVTALRM ，但是包括该进程的 CPU 时间以及系统调用时间。 |
| 28 | SIGWINCH | 窗口大小改变是发出。 |
| 29 | SIGIO | 文件描述符准备就绪，可以进行 输入 / 输出操作。 |
| 30 | SIGPWR | Power failure |
| 31 | SIGSYS | 非法的系统调用。 |
| 32~64 | ... | 用户自定义 |
