<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Log4py 学习笔记 | Shuanglong</title>
  <meta name="author" content="JiangShuanglong">
  
  <meta name="description" content="Descrition">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Log4py 学习笔记"/>
  <meta property="og:site_name" content="Shuanglong"/>

  
    <meta property="og:image" content=""/>
  

  
    <link rel="alternative" href="//atom.xml" title="Shuanglong" type="application/atom+xml">
  
  
    <link href="/css/images/favicon.ico" rel="icon">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/themes/cerulean.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/responsive.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight-default.min.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/comment.css" media="screen" type="text/css">
  <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.9/es5-shim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/es5-shim/4.5.7/es5-sham.min.js"></script>
  <![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>
  
    <script src="/js/marked.js"></script>
    <script src="/js/comment.js"></script>
    <script src="/js/timeago.min.js"></script>
    <script src="/js/highlight.min.js"></script>
	<script src="/js/spin.min.js"></script>
  
  <!-- analytics -->
  


<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?cdbf45c160c2410580214c9a5a9b169c";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<meta name="generator" content="Hexo 7.0.0-rc2"></head>

<body>
  <nav id="main-nav" class="navbar navbar-inverse navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
       <a class="navbar-brand" href="/">Shuanglong</a>
      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  
		  <li>
			<a href="/archives" title="All the articles.">
			  <i class="fa fa-archive"></i>Archives
			</a>
		  </li>
		  
		  <li>
			<a href="/categories" title="All the categories.">
			  <i class="fa fa-folder"></i>Categories
			</a>
		  </li>
		  
		  <li>
			<a href="/tags" title="All the tags.">
			  <i class="fa fa-tags"></i>Tags
			</a>
		  </li>
		  
		  <li>
			<a href="/about" title="About Shuanglong">
			  <i class="fa fa-user"></i>About
			</a>
		  </li>
		  
		</ul>
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
    <div class="content">
      


	
		<div class="page-header page-header-inverse ">		
			<h1 class="title title-inverse "> Log4py 学习笔记</h1>
		</div>		
	






<div class="row post">
	<!-- cols -->
	
	<div id="top_meta"></div>
	<div class="col-md-9">
	

	<!-- content -->
	<div class="mypage">		
	  		

	  <h2 id="Python-日志模块-logging-简介"><a href="#Python-日志模块-logging-简介" class="headerlink" title="Python 日志模块 logging 简介"></a>Python 日志模块 logging 简介</h2><p>logging分为4模块：loggers,handlers,filters,and formatters.</p>
<ul>
<li>loggers: 提供应用程序调用的接口</li>
<li>handlers: 把日志发送到指定的位置</li>
<li>filters: 过滤日志信息</li>
<li>formatters: 格式化输出日志<span id="more"></span>
<h3 id="Logger"><a href="#Logger" class="headerlink" title="Logger"></a>Logger</h3><pre><code>  Logger.setLevel()       # 设置日志级别
  Logger.addHandler()     # 增加日志处理器
  Logger.removeHandler()  # 删除日志处理器
  Logger.addFilter()      # 增加过滤器
  Logger.removeFilter()   # 删除过滤器
  # 创建不同级别的日志
  Logger.debug()    # DEBUG
  Logger.info()     # INFO
  Logger.warn()     # WARNING
  Logger.warning()  # WARNING
  Logger.error()    # ERROR
  Logger.fatal()    # CRITICAL
  Logger.critical() # CRITICAL
  getLogger()获取日志的根实例
</code></pre>
<h3 id="Handler"><a href="#Handler" class="headerlink" title="Handler"></a>Handler</h3><pre><code>  Handler.setLevel()     # 设置日志级别
  Handler.setFormatter() # 设置输出格式
  Handler.addFilter()    # 增加过滤器
  Handler.removeFilter() # 删除过滤器
</code></pre>
<h3 id="Formatter"><a href="#Formatter" class="headerlink" title="Formatter"></a>Formatter</h3>时间默认形式：%Y-%m-%d %H:%M:%S<br>格式为：%()s</li>
</ul>
<table>
<thead>
<tr>
<th align="center">格式</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">%(levelno)s</td>
<td align="center">打印日志级别的数值</td>
</tr>
<tr>
<td align="center">%(levelname)s</td>
<td align="center">打印日志级别的名称</td>
</tr>
<tr>
<td align="center">%(pathname)s</td>
<td align="center">打印当前执行程序的路径==sys.argv[0]</td>
</tr>
<tr>
<td align="center">%(filename)s</td>
<td align="center">打印当前执行程序名</td>
</tr>
<tr>
<td align="center">%(funcName)s</td>
<td align="center">打印当前函数名</td>
</tr>
<tr>
<td align="center">%(lineno)d</td>
<td align="center">打印当前行号</td>
</tr>
<tr>
<td align="center">%(asctime)s</td>
<td align="center">打印当前时间（升序）</td>
</tr>
<tr>
<td align="center">%(created)f</td>
<td align="center">打印当前时间（浮点型，不易读）</td>
</tr>
<tr>
<td align="center">%(thread)d</td>
<td align="center">打印当前线程ID</td>
</tr>
<tr>
<td align="center">%(threadName)s</td>
<td align="center">打印当前线程名称</td>
</tr>
<tr>
<td align="center">%(process)d</td>
<td align="center">打印当前进程ID</td>
</tr>
<tr>
<td align="center">%(processName)s</td>
<td align="center">打印当前进程名称</td>
</tr>
<tr>
<td align="center">%(message)s</td>
<td align="center">打印日志信息</td>
</tr>
<tr>
<td align="center">%(module)s</td>
<td align="center">打印模块名称</td>
</tr>
<tr>
<td align="center">%(msecs)d</td>
<td align="center">打印当前时间毫秒数</td>
</tr>
<tr>
<td align="center">%(name)s</td>
<td align="center">打印 logger 的名称</td>
</tr>
<tr>
<td align="center">%(relativeCreated)d</td>
<td align="center">打印相对于模块加载完成是的毫秒数</td>
</tr>
</tbody></table>
<h2 id="Python-日志级别"><a href="#Python-日志级别" class="headerlink" title="Python 日志级别"></a>Python 日志级别</h2><p>小于指定级别的日志消息将被忽略。<br>Logging messages which are less severe than specified level will be ignored.</p>
<table>
<thead>
<tr>
<th align="center">Level</th>
<th align="center">Numeric value</th>
<th align="center"></th>
</tr>
</thead>
<tbody><tr>
<td align="center">CRITICAL</td>
<td align="center">50</td>
<td align="center">临界</td>
</tr>
<tr>
<td align="center">ERROR</td>
<td align="center">40</td>
<td align="center">错误</td>
</tr>
<tr>
<td align="center">WARNING</td>
<td align="center">30</td>
<td align="center">警告</td>
</tr>
<tr>
<td align="center">INFO</td>
<td align="center">20</td>
<td align="center">通知</td>
</tr>
<tr>
<td align="center">DEBUG</td>
<td align="center">10</td>
<td align="center">调试</td>
</tr>
<tr>
<td align="center">NOTSET</td>
<td align="center">0</td>
<td align="center">未置</td>
</tr>
</tbody></table>
<h2 id="Logging-模块实战"><a href="#Logging-模块实战" class="headerlink" title="Logging 模块实战"></a>Logging 模块实战</h2><h3 id="1-小例子"><a href="#1-小例子" class="headerlink" title="1. 小例子"></a>1. 小例子</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encoding:utf-8</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;log4py testing&quot;</span>)</span><br><span class="line">import logging,logging.config</span><br><span class="line"></span><br><span class="line">logging.basicConfig(level=logging.DEBUG)<span class="comment"># 默认级别：WARNING,WARN,30</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">log</span> = logging.getLogger()</span><br><span class="line">log.debug(<span class="string">&quot;Debug Testing ...&quot;</span>)</span><br><span class="line">log.info(<span class="string">&quot;Info Testing ...&quot;</span>)</span><br><span class="line">log.warn(<span class="string">&quot;Warn Testing ...&quot;</span>)</span><br><span class="line">log.warning(<span class="string">&quot;Warinig Testing ...&quot;</span>)</span><br><span class="line">log.error(<span class="string">&quot;Error Testing ...&quot;</span>)</span><br><span class="line">log.fatal(<span class="string">&quot;Fatal Testing ...&quot;</span>)</span><br><span class="line">log.critical(<span class="string">&quot;Critical Testing ...&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="2-进阶例子"><a href="#2-进阶例子" class="headerlink" title="2. 进阶例子"></a>2. 进阶例子</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># encoding:utf-8</span></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;log4py testing&quot;</span>)</span><br><span class="line">import logging</span><br><span class="line">import logging.handlers</span><br><span class="line">import sys</span><br><span class="line"></span><br><span class="line"><span class="comment"># StreamHandler == ConsoleAppender,输出到流，控制台调试</span></span><br><span class="line">streamFmt = logging.Formatter(<span class="string">&#x27;[ %(levelname)-8s ] %(asctime)s.%(msecs)d %(name)s %(message)s&#x27;</span>,<span class="string">&#x27;%H:%M:%S&#x27;</span>)</span><br><span class="line">stream = logging.StreamHandler(sys.stdout)</span><br><span class="line">stream.setLevel(logging.DEBUG)</span><br><span class="line">stream.setFormatter(streamFmt);</span><br><span class="line"></span><br><span class="line"><span class="comment"># FileHandler == FileAppender,输出到指定文件 [不追加，用于临时运行调试]</span></span><br><span class="line">tempFile = logging.FileHandler(<span class="string">&quot;tempFile.log&quot;</span>,<span class="string">&#x27;w&#x27;</span>)</span><br><span class="line">tempFile.setLevel(logging.DEBUG)</span><br><span class="line">tempFile.setFormatter(streamFmt)</span><br><span class="line"></span><br><span class="line"><span class="comment"># RotatingFileHandler = RollingFileAppender,按指定大小回滚 [追加，长期运行记录]</span></span><br><span class="line">fileFmt = logging.Formatter(<span class="string">&#x27;[ %(levelname)-8s ] %(asctime)s %(name)s %(message)s&#x27;</span>)<span class="comment"># 使用默认时间格式</span></span><br><span class="line">rotateFile = logging.handlers.RotatingFileHandler(<span class="string">&quot;rotateFile.log&quot;</span>,<span class="string">&#x27;a&#x27;</span>,10485760,5)<span class="comment"># 超过 10M 则分割文件，最多保留5个分割文件</span></span><br><span class="line">rotateFile.setLevel(logging.INFO)</span><br><span class="line">rotateFile.setFormatter(fileFmt)</span><br><span class="line"></span><br><span class="line"><span class="built_in">log</span> = logging.getLogger()</span><br><span class="line">log.setLevel(logging.NOTSET)<span class="comment"># 默认是 WARNING 级别，并且被其他 Handler 继承</span></span><br><span class="line"></span><br><span class="line">log.addHandler(stream)</span><br><span class="line">log.addHandler(tempFile)</span><br><span class="line">log.addHandler(rotateFile)</span><br><span class="line"></span><br><span class="line">log.debug(<span class="string">&quot;Debug Testing ...&quot;</span>)</span><br><span class="line">log.info(<span class="string">&quot;Info Testing ...&quot;</span>)</span><br><span class="line">log.warn(<span class="string">&quot;Warn Testing ...&quot;</span>)</span><br><span class="line">log.warning(<span class="string">&quot;Warinig Testing ...&quot;</span>)</span><br><span class="line">log.error(<span class="string">&quot;Error Testing ...&quot;</span>)</span><br><span class="line">log.fatal(<span class="string">&quot;Fatal Testing ...&quot;</span>)</span><br><span class="line">log.critical(<span class="string">&quot;Critical Testing ...&quot;</span>)</span><br><span class="line"></span><br><span class="line">logging.shutdown()<span class="comment"># 更安全地退出</span></span><br></pre></td></tr></table></figure>

<h3 id="3-配置文件使用说明"><a href="#3-配置文件使用说明" class="headerlink" title="3. 配置文件使用说明"></a>3. 配置文件使用说明</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line">	&lt;&lt; <span class="string">Log4pyConfig.py &gt;&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># encoding:utf-8</span></span><br><span class="line"><span class="string">print(&quot;log4py configuration testing&quot;)</span></span><br><span class="line"><span class="string">import logging,logging.config</span></span><br><span class="line"><span class="string"># 通过配置文件 [log4py.conf] 设置 log4py 的属性</span></span><br><span class="line"><span class="string">logging.config.fileConfig(&quot;log4py.conf&quot;)</span></span><br><span class="line"><span class="string">log = logging.getLogger()</span></span><br><span class="line"><span class="string">#log1 = logging.getLogger(&quot;stream&quot;)</span></span><br><span class="line"><span class="string">#log2 = logging.getLogger(&quot;tempFile&quot;)</span></span><br><span class="line"><span class="string">#log3 = logging.getLogger(&quot;rotateFile&quot;)</span></span><br><span class="line"><span class="string">log.setLevel(logging.NOTSET)</span></span><br><span class="line"><span class="string">log.debug(&quot;Debug Testing ...&quot;)</span></span><br><span class="line"><span class="string">log.info(&quot;Info Testing ...&quot;)</span></span><br><span class="line"><span class="string">log.warn(&quot;Warn Testing ...&quot;)</span></span><br><span class="line"><span class="string">log.warning(&quot;Warinig Testing ...&quot;)</span></span><br><span class="line"><span class="string">log.error(&quot;Error Testing ...&quot;)</span></span><br><span class="line"><span class="string">log.fatal(&quot;Fatal Testing ...&quot;)</span></span><br><span class="line"><span class="string">log.critical(&quot;Critical Testing ...&quot;)</span></span><br><span class="line"><span class="string">logging.shutdown()</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	&lt;&lt; log4py.conf &gt;&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># log4py configuration file</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[loggers]</span></span><br><span class="line"><span class="string">keys=root,stream,tempFile,rotateFile</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[handlers]</span></span><br><span class="line"><span class="string">keys=streamHandler,fileHandler,rotateHandler</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[formatters]</span></span><br><span class="line"><span class="string">keys=streamFmt,rotateFmt</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[logger_root]</span></span><br><span class="line"><span class="string">level=NOTSET</span></span><br><span class="line"><span class="string">handlers=streamHandler,fileHandler,rotateHandler</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[logger_stream]</span></span><br><span class="line"><span class="string">level=DEBUG</span></span><br><span class="line"><span class="string">handlers=streamHandler</span></span><br><span class="line"><span class="string">qualname=stream</span></span><br><span class="line"><span class="string">propagate=0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[logger_tempFile]</span></span><br><span class="line"><span class="string">level=DEBUG</span></span><br><span class="line"><span class="string">handlers=fileHandler</span></span><br><span class="line"><span class="string">qualname=tempFile</span></span><br><span class="line"><span class="string">propagate=0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[logger_rotateFile]</span></span><br><span class="line"><span class="string">level=DEBUG</span></span><br><span class="line"><span class="string">handlers=rotateHandler</span></span><br><span class="line"><span class="string">qualname=rotateFile</span></span><br><span class="line"><span class="string">propagate=0</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[handler_streamHandler]</span></span><br><span class="line"><span class="string">class=StreamHandler</span></span><br><span class="line"><span class="string">level=DEBUG</span></span><br><span class="line"><span class="string">formatter=streamFmt</span></span><br><span class="line"><span class="string">args=(sys.stdout,)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[handler_fileHandler]</span></span><br><span class="line"><span class="string">class=FileHandler</span></span><br><span class="line"><span class="string">level=DEBUG</span></span><br><span class="line"><span class="string">formatter=streamFmt</span></span><br><span class="line"><span class="string">args=(&#x27;tempFile.log&#x27;,&#x27;w&#x27;,)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[handler_rotateHandler]</span></span><br><span class="line"><span class="string">class=handlers.RotatingFileHandler</span></span><br><span class="line"><span class="string">level=INFO</span></span><br><span class="line"><span class="string">formatter=rotateFmt</span></span><br><span class="line"><span class="string">args=(&#x27;rotateFile.log&#x27;,&#x27;a&#x27;,10485760,5,)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[formatter_streamFmt]</span></span><br><span class="line"><span class="string">format=[ %(levelname)-8s ] %(asctime)s.%(msecs)d %(name)s %(message)s</span></span><br><span class="line"><span class="string">datefmt=%H:%M:%S</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[formatter_rotateFmt]</span></span><br><span class="line"><span class="string">format=[ %(levelname)-8s ] %(asctime)s %(name)s %(message)s</span></span><br></pre></td></tr></table></figure>

<h3 id="4-字典配置说明"><a href="#4-字典配置说明" class="headerlink" title="4. 字典配置说明"></a>4. 字典配置说明</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">	&lt;&lt; <span class="string">Log4pyDictConfig.py &gt;&gt;</span></span><br><span class="line"><span class="string"># encoding:utf-8</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">import logging,logging.config</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">print(&quot;log4py dictionary configuration&quot;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">LOG_DICT= &#123;</span></span><br><span class="line"><span class="string">	&#x27;version&#x27;:1,</span></span><br><span class="line"><span class="string">	&#x27;loggers&#x27;:&#123;</span></span><br><span class="line"><span class="string">		&#x27;root&#x27;:&#123;</span></span><br><span class="line"><span class="string">			&#x27;level&#x27;:&#x27;DEBUG&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;handlers&#x27;:[&#x27;streamHandler&#x27;,&#x27;fileHandler&#x27;,&#x27;rotateHandler&#x27;]</span></span><br><span class="line"><span class="string">		&#125;,</span></span><br><span class="line"><span class="string">		&#x27;stream&#x27;:&#123;</span></span><br><span class="line"><span class="string">			&#x27;level&#x27;:&#x27;DEBUG&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;handlers&#x27;:[&#x27;streamHandler&#x27;]</span></span><br><span class="line"><span class="string">		&#125;,</span></span><br><span class="line"><span class="string">		&#x27;tempFile&#x27;:&#123;</span></span><br><span class="line"><span class="string">			&#x27;level&#x27;:&#x27;DEBUG&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;handlers&#x27;:[&#x27;fileHandler&#x27;]</span></span><br><span class="line"><span class="string">		&#125;,</span></span><br><span class="line"><span class="string">		&#x27;rotateFile&#x27;:&#123;</span></span><br><span class="line"><span class="string">			&#x27;level&#x27;:&#x27;INFO&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;handlers&#x27;:[&#x27;rotateHandler&#x27;]</span></span><br><span class="line"><span class="string">		&#125;</span></span><br><span class="line"><span class="string">	&#125;,</span></span><br><span class="line"><span class="string">	&#x27;handlers&#x27;:&#123;</span></span><br><span class="line"><span class="string">		&#x27;streamHandler&#x27;:&#123;</span></span><br><span class="line"><span class="string">			&#x27;class&#x27;:&#x27;logging.StreamHandler&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;level&#x27;:&#x27;DEBUG&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;formatter&#x27;:&#x27;streamFmt&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;stream&#x27;:&#x27;ext://sys.stdout&#x27;</span></span><br><span class="line"><span class="string">		&#125;,</span></span><br><span class="line"><span class="string">		&#x27;fileHandler&#x27;:&#123;</span></span><br><span class="line"><span class="string">			&#x27;class&#x27;:&#x27;logging.FileHandler&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;level&#x27;:&#x27;DEBUG&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;formatter&#x27;:&#x27;streamFmt&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;filename&#x27;:&#x27;tempFile.log&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;mode&#x27;:&#x27;w&#x27;</span></span><br><span class="line"><span class="string">		&#125;,</span></span><br><span class="line"><span class="string">		&#x27;rotateHandler&#x27;:&#123;</span></span><br><span class="line"><span class="string">			&#x27;class&#x27;:&#x27;logging.handlers.RotatingFileHandler&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;level&#x27;:&#x27;INFO&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;formatter&#x27;:&#x27;rotateFmt&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;filename&#x27;:&#x27;rotateFile.log&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;mode&#x27;:&#x27;a&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;maxBytes&#x27;:10485760,</span></span><br><span class="line"><span class="string">			&#x27;backupCount&#x27;:5</span></span><br><span class="line"><span class="string">		&#125;</span></span><br><span class="line"><span class="string">	&#125;,</span></span><br><span class="line"><span class="string">	&#x27;formatters&#x27;:&#123;</span></span><br><span class="line"><span class="string">		&#x27;streamFmt&#x27;:&#123;</span></span><br><span class="line"><span class="string">			&#x27;format&#x27;:&#x27;[ %(levelname)-8s ] %(asctime)s.%(msecs)d %(module)s %(funcName)s %(message)s&#x27;,</span></span><br><span class="line"><span class="string">			&#x27;datefmt&#x27;:&#x27;%H:%M:%S&#x27;</span></span><br><span class="line"><span class="string">		&#125;,</span></span><br><span class="line"><span class="string">		&#x27;rotateFmt&#x27;:&#123;</span></span><br><span class="line"><span class="string">			&#x27;format&#x27;:&#x27;[ %(levelname)-8s ] %(asctime)s %(module)s %(funcName)s %(message)s&#x27;</span></span><br><span class="line"><span class="string">		&#125;</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">logging.config.dictConfig(LOG_DICT)</span></span><br><span class="line"><span class="string">log = logging.getLogger(&quot;root&quot;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">log.debug(&quot;Debug Testing ...&quot;)</span></span><br><span class="line"><span class="string">log.info(&quot;Info Testing ...&quot;)</span></span><br><span class="line"><span class="string">log.warn(&quot;Warn Testing ...&quot;)</span></span><br><span class="line"><span class="string">log.warning(&quot;Warinig Testing ...&quot;)</span></span><br><span class="line"><span class="string">log.error(&quot;Error Testing ...&quot;)</span></span><br><span class="line"><span class="string">log.fatal(&quot;Fatal Testing ...&quot;)</span></span><br><span class="line"><span class="string">log.critical(&quot;Critical Testing ...&quot;)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">logging.shutdown()</span></span><br></pre></td></tr></table></figure>
<h3 id="参考网址"><a href="#参考网址" class="headerlink" title="参考网址"></a>参考网址</h3><p><a target="_blank" rel="noopener" href="http://www.phperz.com/article/16/0120/93998.html">http://www.phperz.com/article/16/0120/93998.html</a><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/fxjtoday/article/details/6307285">http://blog.csdn.net/fxjtoday/article/details/6307285</a><br><a target="_blank" rel="noopener" href="http://zeping.blog.51cto.com/6140112/1259065">http://zeping.blog.51cto.com/6140112/1259065</a><br><a target="_blank" rel="noopener" href="http://blog.csdn.net/chosen0ne/article/details/7319306">http://blog.csdn.net/chosen0ne/article/details/7319306</a></p>
<h3 id="其它相关网址"><a href="#其它相关网址" class="headerlink" title="其它相关网址"></a>其它相关网址</h3><p><a target="_blank" rel="noopener" href="https://docs.python.org/2.7/library/logging.html#module-logging" title="Logging facility for Python">官方文档</a><br><a target="_blank" rel="noopener" href="http://www.runoob.com/python/python-date-time.html" title="http://www.runoob.com/">Python时间格式化</a></p>
	  
	</div>

	<!-- recommended posts -->
	

	<div>
  	<center>
	<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/2016/05/06/Python/Python小技巧/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>上一页</a></li>
  		

        <li><a href="/archives"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/2016/04/22/Network/Apache配置多个虚拟主机-Windows/" class="alignright next">下一页<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

    </center>
	</div>

    <!-- share -->
    
        
    <div class="bdsharebuttonbox">
        <a href="#" class="bds_more" data-cmd="more"></a>
        <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
        <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
        <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
        <a href="#" class="bds_twi" data-cmd="twi" title="分享到Twitter"></a>
        <a href="#" class="bds_linkedin" data-cmd="linkedin" title="分享到linkedin"></a>
        <a href="#" class="bds_evernotecn" data-cmd="evernotecn" title="分享到印象笔记"></a>
        <a href="#" class="bds_youdao" data-cmd="youdao" title="分享到有道云笔记"></a>
        <a href="#" class="bds_copy" data-cmd="copy" title="分享到复制网址"></a>
    </div>
    <script>
        window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"24"},"share":{}};
        with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];
    </script>


        

    
	
	<!-- comment -->
	
<section id="comment">
  <h2 class="title">留言</h2>
    	 
	 <div id="comment-thread"></div>
	 <div id="loading-spin"></div>
	 <script type="text/javascript">
	   getComments({
           type: "github" ? "github" : "github",       
	       user: "xautshuanglong",
	       repo: "xautshuanglong.github.io",
		   client_id: "9393dc785289a96d8026",
           client_secret: "e33339d6cbd320a707d655ee9b941a01c3c8ae28",
		   no_comment: "暂时还没有留言呢，点击下面的按钮去留言吧！",
		   go_to_comment: "去留言",
		   no_issue: "no_issue",
		   issue_title: "Log4py 学习笔记",
		   issue_id: "",
		   btn_class: "btn btn-primary",
		   comments_target: "#comment-thread",
		   loading_target: "#loading_spin"
		   });
	 </script>
  
</section>


	</div> <!-- col-md-9/col-md-12 -->
		
	
	<div id="side_meta">
		<div class="col-md-3" id="post_meta"> 

	<!-- date -->
	
	<div class="meta-widget">
	<i class="fa fa-clock-o"></i>
	2016-05-03 
	</div>
	

	<!-- categories -->
    
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i></a>	
    <ul id="categorys" class="tag_box list-unstyled collapse in">
          
  <li>
    <li><a href="/categories/Python/">Python<span>4</span></a></li>
  </li>

    </ul>
	</div>
	

	<!-- tags -->
	
	<div class="meta-widget">
	<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"></i></a>		  
    <ul id="tags" class="tag_box list-unstyled collapse in">	  
	    
  <li><a href="/tags/Python/">Python<span>3</span></a></li> <li><a href="/tags/log4py/">log4py<span>1</span></a></li>
    </ul>
	</div>
	

	<!-- toc -->
	<div class="meta-widget">
	
	   <a data-toggle="collapse" data-target="#toc"><i class="fa fa-bars"></i></a>
	   <div id="toc" class="toc collapse in">
			<ol class="toc-article"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Python-%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97-logging-%E7%AE%80%E4%BB%8B"><span class="toc-article-text">Python 日志模块 logging 简介</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Logger"><span class="toc-article-text">Logger</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Handler"><span class="toc-article-text">Handler</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Formatter"><span class="toc-article-text">Formatter</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Python-%E6%97%A5%E5%BF%97%E7%BA%A7%E5%88%AB"><span class="toc-article-text">Python 日志级别</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Logging-%E6%A8%A1%E5%9D%97%E5%AE%9E%E6%88%98"><span class="toc-article-text">Logging 模块实战</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#1-%E5%B0%8F%E4%BE%8B%E5%AD%90"><span class="toc-article-text">1. 小例子</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#2-%E8%BF%9B%E9%98%B6%E4%BE%8B%E5%AD%90"><span class="toc-article-text">2. 进阶例子</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#3-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E"><span class="toc-article-text">3. 配置文件使用说明</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#4-%E5%AD%97%E5%85%B8%E9%85%8D%E7%BD%AE%E8%AF%B4%E6%98%8E"><span class="toc-article-text">4. 字典配置说明</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E5%8F%82%E8%80%83%E7%BD%91%E5%9D%80"><span class="toc-article-text">参考网址</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E5%85%B6%E5%AE%83%E7%9B%B8%E5%85%B3%E7%BD%91%E5%9D%80"><span class="toc-article-text">其它相关网址</span></a></li></ol></li></ol>
		</div>
	
	</div>
	
    <hr>
	
</div><!-- col-md-3 -->

	</div>
		

</div><!-- row -->



    </div>
  </div>
  <div class="container-narrow">
    <footer> <p>
  &copy; 2023 JiangShuanglong
  
      with help from <a href="http://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme by <a target="_blank" rel="noopener" href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.    
</p> </footer>
  </div> <!-- container-narrow -->
  


  <a id="gotop" href="#">
  <span>▲</span>
</a>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/search.js"></script>


<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>



   <script type="text/javascript">
     var search_path = "search.xml";
	 if (search_path.length == 0) {
	 	search_path = "search.xml";
	 }
	 var path = "/" + search_path;
     searchFunc(path, 'local-search-input', 'local-search-result');
   </script>


<!-- Mathjax for 3D formula by shuanglong begin -->

<!-- Mathjax for 3D formula by shuanglong end -->

<!-- syntax highlighting -->

  <script>
  marked.setOptions({
    highlight: function (code, lang) {
        return hljs.highlightAuto(code).value;
    }
  });
  function Highlighting(){
    var markdowns = document.getElementsByClassName('markdown');
    for(var i=0;i<markdowns.length;i++){
        if(markdowns[i].innerHTML) markdowns[i].innerHTML =marked(markdowns[i].innerHTML);
    }
  }
  window.addEventListener('DOMContentLoaded', Highlighting, false);
  window.addEventListener('load', Highlighting, false);
  </script>


<!-- mermaid chart -->


</body>
</html>